import{cj as N,r as T,o as _,c as h,w as e,b as t,u as y,e as f,br as F,c5 as P,aF as I,g as R,c6 as j,s as C,aP as k,j as S,F as B,aT as b,d as L,cD as M,m as O}from"./index.b0e1550a.js";import{_ as V,a as Y,C as $}from"./index.9a44580e.js";/* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css               */import"./index.13ccca11.js";import{i as K}from"./index.a402f9d8.js";import{_ as U}from"./index.764bd5c9.js";import{w as q,u as z}from"./xlsx.db07aefa.js";import{R as A}from"./index.aa9f7d32.js";import{D as G}from"./DownloadOutlined.b6ed2567.js";import"./vuedraggable.umd.15cba163.js";import"./index.50a7696f.js";import"./css.1dd79e5e.js";import"./index.d4371571.js";import"./Spin.83ba1358.js";import"./index.79d1eddb.js";import"./useMaxLevel.2bdcb2e5.js";import"./Group.ef3b103e.js";import"./index.92aa3868.js";import"./RadioButton.4b1c6045.js";import"./CaretUpOutlined.0f21e912.js";import"./iconUtil.035bdc1b.js";const H=f("\u67E5\u8BE2"),J=f("\u91CD\u7F6E"),Q={__name:"login-record-search",emits:["search"],setup(g,{emit:a}){const{form:u,resetFields:w}=N({username:"",nickname:""}),d=T(["",""]),v=()=>{var i;const[r,o]=(i=d.value)!=null?i:[];a("search",{...u,createTimeStart:r?r+" 00:00:00":"",createTimeEnd:o?o+" 23:59:59":""})},n=()=>{w(),d.value=["",""],v()};return(r,o)=>{const i=F,l=P,c=V,m=A,s=I,p=R,D=Y,E=j;return _(),h(E,{"label-col":{xl:7,lg:5,md:7,sm:4},"wrapper-col":{xl:17,lg:19,md:17,sm:20}},{default:e(()=>[t(D,{gutter:8},{default:e(()=>[t(c,{xl:6,lg:12,md:12,sm:24,xs:24},{default:e(()=>[t(l,{label:"\u7528\u6237\u8D26\u53F7"},{default:e(()=>[t(i,{value:y(u).username,"onUpdate:value":o[0]||(o[0]=x=>y(u).username=x),valueModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),t(c,{xl:6,lg:12,md:12,sm:24,xs:24},{default:e(()=>[t(l,{label:"\u7528\u6237\u540D"},{default:e(()=>[t(i,{value:y(u).nickname,"onUpdate:value":o[1]||(o[1]=x=>y(u).nickname=x),valueModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),t(c,{xl:6,lg:12,md:12,sm:24,xs:24},{default:e(()=>[t(l,{label:"\u767B\u5F55\u65F6\u95F4"},{default:e(()=>[t(m,{value:d.value,"onUpdate:value":o[2]||(o[2]=x=>d.value=x),"value-format":"YYYY-MM-DD",class:"ele-fluid"},null,8,["value"])]),_:1})]),_:1}),t(c,{xl:6,lg:12,md:12,sm:24,xs:24},{default:e(()=>[t(l,{class:"ele-text-right","wrapper-col":{span:24}},{default:e(()=>[t(p,null,{default:e(()=>[t(s,{type:"primary",onClick:v},{default:e(()=>[H]),_:1}),t(s,{onClick:n},{default:e(()=>[J]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};async function W(g){const a=await C.get("/system/login-record/page",{params:g});return a.data.code===0?a.data.data:Promise.reject(new Error(a.data.message))}async function X(g){const a=await C.get("/system/login-record",{params:g});return a.data.code===0&&a.data.data?a.data.data:Promise.reject(new Error(a.data.message))}const Z={class:"ele-body"},ee=L("span",null,"\u5BFC\u51FA",-1),te=f("\u767B\u5F55\u6210\u529F"),oe=f(" \u767B\u5F55\u5931\u8D25 "),ae=f("\u9000\u51FA\u767B\u5F55"),re=f(" \u5237\u65B0TOKEN "),se={name:"SystemLoginRecord"},Ne=Object.assign(se,{setup(g){const a=T(null),u=T([{key:"index",width:48,align:"center",fixed:"left",hideInSetting:!0,customRender:({index:n})=>{var r,o;return n+((o=(r=a.value)==null?void 0:r.tableIndex)!=null?o:0)}},{title:"\u8D26\u53F7",dataIndex:"username",sorter:!0,showSorterTooltip:!1},{title:"\u7528\u6237\u540D",dataIndex:"nickname",sorter:!0,showSorterTooltip:!1},{title:"IP\u5730\u5740",dataIndex:"ip",sorter:!0,showSorterTooltip:!1,ellipsis:!0},{title:"\u8BBE\u5907\u578B\u53F7",dataIndex:"device",sorter:!0,showSorterTooltip:!1,ellipsis:!0},{title:"\u64CD\u4F5C\u7CFB\u7EDF",dataIndex:"os",sorter:!0,showSorterTooltip:!1,ellipsis:!0},{title:"\u6D4F\u89C8\u5668",dataIndex:"browser",sorter:!0,showSorterTooltip:!1,ellipsis:!0},{title:"\u64CD\u4F5C\u7C7B\u578B",key:"loginType",dataIndex:"loginType",sorter:!0,showSorterTooltip:!1,width:120,filters:[{text:"\u767B\u5F55\u6210\u529F",value:0},{text:"\u767B\u5F55\u5931\u8D25",value:1},{text:"\u9000\u51FA\u767B\u5F55",value:2},{text:"\u5237\u65B0TOKEN",value:3}],filterMultiple:!1},{title:"\u5907\u6CE8",dataIndex:"comments",sorter:!0,showSorterTooltip:!1,ellipsis:!0},{title:"\u767B\u5F55\u65F6\u95F4",dataIndex:"createTime",sorter:!0,showSorterTooltip:!1,ellipsis:!0,customRender:({text:n})=>k(n)}]),w=({page:n,limit:r,where:o,orders:i,filters:l})=>W({...o,...i,...l,page:n,limit:r}),d=n=>{var r;(r=a==null?void 0:a.value)==null||r.reload({page:1,where:n})},v=()=>{var o;const n=[["\u8D26\u53F7","\u7528\u6237\u540D","IP\u5730\u5740","\u8BBE\u5907\u578B\u53F7","\u64CD\u4F5C\u7CFB\u7EDF","\u6D4F\u89C8\u5668","\u64CD\u4F5C\u7C7B\u578B","\u5907\u6CE8","\u767B\u5F55\u65F6\u95F4"]],r=M("\u8BF7\u6C42\u4E2D..",0);(o=a.value)==null||o.doRequest(({where:i,orders:l,filters:c})=>{X({...i,...l,...c}).then(m=>{r(),m.forEach(s=>{n.push([s.username,s.nickname,s.ip,s.device,s.os,s.browser,["\u767B\u5F55\u6210\u529F","\u767B\u5F55\u5931\u8D25","\u9000\u51FA\u767B\u5F55","\u5237\u65B0TOKEN"][s.loginType],s.comments,k(s.createTime)])}),q({SheetNames:["Sheet1"],Sheets:{Sheet1:z.aoa_to_sheet(n)}},"\u767B\u5F55\u65E5\u5FD7.xlsx")}).catch(m=>{r(),O.error(m.message)})})};return(n,r)=>{const o=I,i=R,l=U,c=K,m=$;return _(),S("div",Z,[t(m,{bordered:!1},{default:e(()=>[t(Q,{onSearch:d}),t(c,{ref_key:"tableRef",ref:a,"row-key":"id",columns:u.value,datasource:w,scroll:{x:900},"cache-key":"proSystemLoginRecordTable"},{toolbar:e(()=>[t(i,null,{default:e(()=>[t(o,{type:"primary",class:"ele-btn-icon",onClick:v},{icon:e(()=>[t(y(G))]),default:e(()=>[ee]),_:1})]),_:1})]),bodyCell:e(({column:s,record:p})=>[s.key==="loginType"?(_(),S(B,{key:0},[p.loginType===0?(_(),h(l,{key:0,color:"green"},{default:e(()=>[te]),_:1})):p.loginType===1?(_(),h(l,{key:1,color:"red"},{default:e(()=>[oe]),_:1})):p.loginType===2?(_(),h(l,{key:2},{default:e(()=>[ae]),_:1})):p.loginType===3?(_(),h(l,{key:3,color:"orange"},{default:e(()=>[re]),_:1})):b("",!0)],64)):b("",!0)]),_:1},8,["columns"])]),_:1})])}}});export{Ne as default};
