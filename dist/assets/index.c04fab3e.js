import{r as _,cj as N,a as W,a9 as X,o as G,c as R,w as t,b as e,u as s,m as f,br as E,c5 as M,c6 as S,b5 as Y,dd as Z,aP as ee,a3 as te,j as oe,d as h,cz as V,aT as ae,cM as ne,e as b,cg as le,bB as se,aF as re,g as ie,h as ue}from"./index.b0e1550a.js";import{_ as q,a as A,C as _e}from"./index.9a44580e.js";/* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css               */import"./index.13ccca11.js";import{i as de}from"./index.a402f9d8.js";import{U as ce,A as me,G as pe,D as j}from"./textnow.573e152c.js";import{D as fe}from"./DeleteOutlined.e5f00379.js";import"./vuedraggable.umd.15cba163.js";import"./index.50a7696f.js";import"./css.1dd79e5e.js";import"./index.d4371571.js";import"./Spin.83ba1358.js";import"./index.79d1eddb.js";import"./useMaxLevel.2bdcb2e5.js";import"./Group.ef3b103e.js";import"./index.92aa3868.js";import"./RadioButton.4b1c6045.js";import"./CaretUpOutlined.0f21e912.js";import"./iconUtil.035bdc1b.js";const ve={name:"textnow-add"},ge=Object.assign(ve,{props:{visible:Boolean,data:Object},emits:["done","update:visible"],setup(B,{emit:w}){const d=B,i=_(null),v=_(!1),r=_(!1),y=g=>w("update:visible",g),{form:u,resetFields:C,assignFields:c}=N({group_name:"",remark:"",group_id:""}),I=W({group_name:[{required:!0,message:"\u8BF7\u8F93\u5165\u5206\u7EC4\u540D\u79F0",type:"string",trigger:"blur"}],remark:[{required:!0,message:"\u8BF7\u8F93\u5165\u5907\u6CE8",type:"string",trigger:"blur"}]}),$=()=>{!i.value||i.value.validate().then(()=>{r.value=!0,(v.value?ce:me)(u).then(n=>{r.value=!1,f.success(n),y(!1),w("done")}).catch(n=>{r.value=!1,f.error(n.message)})}).catch(()=>{})};return X(()=>d.visible,g=>{var n;d.data?(c({...d.data}),v.value=!0):(C(),(n=i.value)==null||n.clearValidate())}),(g,n)=>{const U=E,a=M,o=q,x=A,m=S,k=Y;return G(),R(k,{width:600,visible:B.visible,"confirm-loading":r.value,title:v.value?"\u7F16\u8F91\u5206\u7EC4":"\u6DFB\u52A0\u5206\u7EC4","body-style":{paddingBottom:"8px"},"onUpdate:visible":y,onOk:$},{default:t(()=>[e(m,{ref_key:"formRef",ref:i,model:s(u),rules:I,"label-col":{md:4,sm:4,xs:24},"wrapper-col":{md:20,sm:20,xs:24}},{default:t(()=>[e(x,{gutter:16},{default:t(()=>[e(o,{md:24,sm:24,xs:24},{default:t(()=>[e(a,{label:"\u5206\u7EC4\u540D\u79F0",name:"group_name"},{default:t(()=>[e(U,{"allow-clear":"",maxlength:20,placeholder:"\u5206\u7EC4\u540D\u79F0",value:s(u).group_name,"onUpdate:value":n[0]||(n[0]=p=>s(u).group_name=p)},null,8,["value"])]),_:1}),e(a,{label:"\u5206\u7EC4\u5907\u6CE8",name:"remark"},{default:t(()=>[e(U,{"allow-clear":"",maxlength:50,placeholder:"\u5206\u7EC4\u5907\u6CE8",value:s(u).remark,"onUpdate:value":n[1]||(n[1]=p=>s(u).remark=p)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["visible","confirm-loading","title"])}}}),be={class:"ele-body"},xe=b("\u672A\u767B\u5F55"),ke=b("\u5DF2\u767B\u5F55"),he=b("\u8D26\u53F7\u5931\u6548"),we=h("em",null,null,-1),ye=b("\u641C\u7D22"),Ce=b("\u91CD\u7F6E"),Ue=b("\u67E5\u770B"),Oe=["onClick"],Be=["onClick"],Ie=h("span",null,"\u65B0\u5EFA\u5206\u7EC4",-1),$e=h("span",null,"\u5220\u9664\u5206\u7EC4",-1),De={name:"index"},et=Object.assign(De,{setup(B){const{t:w}=Z(),d=_([]),i=_(!1),v=_(null),r=_(null),y=_([{title:"\u5206\u7EC4\u540D\u79F0",dataIndex:"group_name"},{title:"\u6240\u5C5E\u7528\u6237",dataIndex:"user_login",customRender:({text:a})=>a!=null?a:"(\u672A\u8BBE\u7F6E)"},{title:"\u767B\u5F55\u6210\u529F",dataIndex:"loginOk"},{title:"\u8D26\u53F7\u6570\u91CF",dataIndex:"loginFull"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"add_time",ellipsis:!0,customRender:({text:a})=>ee(a)},{title:w("list.basic.table.action"),key:"action",width:170,align:"center",hideInSetting:!0,fixed:"right"}]),u=({page:a,limit:o,where:x,orders:m})=>pe({...x,...m,page:a,limit:o}),C=a=>{v.value=a!=null?a:null,i.value=!0},{form:c,resetFields:I}=N({username:"",status:void 0}),$=a=>{j({ids:[a.group_id]}).then(o=>{f.success(o),n()}).catch(o=>{f.error(o.message)})},g=()=>{const a=d.value.map(o=>o.group_id);a.length===0?f.error("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u5206\u7EC4"):j({ids:a}).then(o=>{f.success(o),n()}).catch(o=>{f.error(o.message)})},n=()=>{var a;(a=r==null?void 0:r.value)==null||a.reload({page:1,where:c})},U=()=>{I(),n()};return(a,o)=>{const x=E,m=M,k=q,p=le,P=se,O=re,D=ie,z=A,H=S,J=te("router-link"),T=ue,K=de,L=_e;return G(),oe("div",be,[e(L,{bordered:!1},{default:t(()=>[e(H,{"label-col":{md:{span:1},sm:{span:24}},"wrapper-col":{md:{span:23},sm:{span:24}}},{default:t(()=>[e(z,null,{default:t(()=>[e(k,{lg:4,md:12,sm:24,xs:24},{default:t(()=>[e(m,null,{default:t(()=>[e(x,{value:s(c).username,"onUpdate:value":o[0]||(o[0]=l=>s(c).username=l),valueModifiers:{trim:!0},placeholder:"\u5206\u7EC4\u540D\u79F0","allow-clear":""},null,8,["value"])]),_:1})]),_:1}),e(k,{lg:4,md:12,sm:24,xs:24},{default:t(()=>[e(m,null,{default:t(()=>[e(P,{value:s(c).status,"onUpdate:value":o[1]||(o[1]=l=>s(c).status=l),placeholder:"\u72B6\u6001","allow-clear":""},{default:t(()=>[e(p,{value:"1"},{default:t(()=>[xe]),_:1}),e(p,{value:"2"},{default:t(()=>[ke]),_:1}),e(p,{value:"3"},{default:t(()=>[he]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(k,{lg:4,md:24,sm:24,xs:24},{default:t(()=>[e(m,{"wrapper-col":{span:24}},{default:t(()=>[we,e(D,null,{default:t(()=>[e(O,{type:"primary",onClick:n},{default:t(()=>[ye]),_:1}),e(O,{onClick:U},{default:t(()=>[Ce]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(K,{ref_key:"tableRef",ref:r,"row-key":"group_id",columns:y.value,scroll:{x:1e3},selection:d.value,"onUpdate:selection":o[4]||(o[4]=l=>d.value=l),datasource:u},{bodyCell:t(({column:l,record:F})=>[l.key==="action"?(G(),R(D,{key:0},{default:t(()=>[e(J,{to:"/textnow/list?id="+F.group_id},{default:t(()=>[Ue]),_:2},1032,["to"]),e(T,{type:"vertical"}),h("a",{onClick:V(Q=>C(F),["stop"])},"\u7F16\u8F91",8,Oe),e(T,{type:"vertical"}),h("a",{class:"ele-text-danger",onClick:V(Q=>$(F),["stop"])},"\u5220\u9664",8,Be)]),_:2},1024)):ae("",!0)]),toolbar:t(()=>[e(D,null,{default:t(()=>[e(O,{type:"primary",class:"ele-btn-icon",onClick:o[2]||(o[2]=l=>C(null))},{icon:t(()=>[e(s(ne))]),default:t(()=>[Ie]),_:1}),e(O,{danger:"",type:"primary",class:"ele-btn-icon",onClick:o[3]||(o[3]=l=>g())},{icon:t(()=>[e(s(fe))]),default:t(()=>[$e]),_:1})]),_:1})]),_:1},8,["columns","selection"])]),_:1}),e(ge,{visible:i.value,"onUpdate:visible":o[5]||(o[5]=l=>i.value=l),data:v.value,onDone:n},null,8,["visible","data"])])}}});export{et as default};
