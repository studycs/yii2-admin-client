import{r as g,m as v,o as i,c,bB as H,cj as G,a as Z,a9 as P,w as e,b as t,u as l,aT as D,e as b,br as J,c5 as K,c6 as Q,b5 as N,cZ as E,d as B,aP as W,j as V,cM as j,F as X,aF as Y,g as ee,h as te}from"./index.b0e1550a.js";import{_ as ae,a as oe,C as se}from"./index.9a44580e.js";/* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css               */import"./index.13ccca11.js";import{i as le}from"./index.a402f9d8.js";import{_ as ne}from"./index.35429753.js";import{_ as ue}from"./index.764bd5c9.js";import{G as re,U as ie,a as de,g as pe,D as ce,b as _e}from"./gv.a35fa7a6.js";import{R as me,_ as ge}from"./Group.ef3b103e.js";import{U as ve}from"./index.1b1a7df7.js";import"./index.7dd997be.js";import{C as fe}from"./CloudUploadOutlined.b0abe14b.js";import{S as be}from"./Spin.83ba1358.js";import{U as xe}from"./UploadOutlined.8feb67ab.js";import"./vuedraggable.umd.15cba163.js";import"./index.50a7696f.js";import"./css.1dd79e5e.js";import"./index.d4371571.js";import"./index.79d1eddb.js";import"./useMaxLevel.2bdcb2e5.js";import"./index.92aa3868.js";import"./RadioButton.4b1c6045.js";import"./CaretUpOutlined.0f21e912.js";import"./iconUtil.035bdc1b.js";import"./DeleteOutlined.e5f00379.js";import"./DownloadOutlined.b6ed2567.js";const ye={name:"gv-group"},he=Object.assign(ye,{props:{value:Number,placeholder:{type:String,default:"\u8BF7\u9009\u62E9\u5206\u7EC4"}},emits:["update:value","blur"],setup($,{emit:f}){const _=g([]);re().then(p=>{_.value=p.map(m=>({value:m.group_id,label:m.group_name}))}).catch(p=>v.error(p.message));const x=p=>f("update:value",p),d=()=>f("blur");return(p,m)=>{const a=H;return i(),c(a,{"show-search":"",optionFilterProp:"label",options:_.value,value:$.value,placeholder:$.placeholder,"onUpdate:value":x,onBlur:d},null,8,["options","value","placeholder"])}}}),ke=b("\u91CD\u65B0\u767B\u5F55"),we=b("\u5224\u65AD\u5931\u6548"),Ue={name:"gv-add"},Ie=Object.assign(Ue,{props:{visible:Boolean,isAdmin:Boolean,data:Object},emits:["done","update:visible"],setup($,{emit:f}){const _=$,x=g(null),d=g(!1),p=g(!1),m=k=>{f("update:visible",k)},{form:a,resetFields:R,assignFields:q}=G({id:"",account:"",passwd:"",num:"",aux_mail:"",proxy:"",proxy_account:"",proxy_password:"",group_id:"",status:""}),O=Z({account:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7",type:"string",trigger:"blur"}],passwd:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",type:"string",trigger:"blur"}],num:[{required:!0,message:"\u8BF7\u8F93\u5165\u53F7\u7801",type:"string",trigger:"blur"}],aux_mail:[{required:!0,message:"\u8BF7\u8F93\u5165\u8F85\u52A9\u90AE\u7BB1",type:"string",trigger:"blur"}],proxy:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EE3\u7406Ip",type:"string",trigger:"blur"}],proxy_account:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EE3\u7406\u8D26\u53F7",type:"string",trigger:"blur"}],proxy_password:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EE3\u7406\u5BC6\u7801",type:"string",trigger:"blur"}],group_id:[{required:!0,message:"\u8BF7\u9009\u62E9\u6240\u5C5E\u5206\u7EC4",type:"number",trigger:"blur"}]}),C=()=>{!x.value||x.value.validate().then(()=>{d.value=!0,ie(a).then(k=>{d.value=!1,v.success(k),m(!1),f("done")}).catch(k=>{d.value=!1,v.error(k.message)})}).catch(()=>null)};return P(()=>_.visible,k=>{var u;_.data?(p.value=!0,q({..._.data})):(R(),(u=x.value)==null||u.clearValidate())}),(k,u)=>{const w=J,y=K,A=me,F=ge,n=ae,o=oe,U=Q,I=N;return i(),c(I,{width:800,visible:$.visible,"confirm-loading":d.value,title:p.value?"\u7F16\u8F91\u5206\u7EC4":"\u6DFB\u52A0\u5206\u7EC4","body-style":{paddingBottom:"8px"},"onUpdate:visible":m,onOk:C},{default:e(()=>[t(U,{ref_key:"formRef",ref:x,model:l(a),rules:O,"label-col":{md:6,sm:4,xs:24},"wrapper-col":{md:18,sm:20,xs:24}},{default:e(()=>[t(o,{gutter:16},{default:e(()=>[t(n,{md:12,sm:24,xs:24},{default:e(()=>[t(y,{label:"\u8D26\u53F7",name:"account"},{default:e(()=>[t(w,{"allow-clear":"",maxlength:20,placeholder:"\u8D26\u53F7",value:l(a).account,"onUpdate:value":u[0]||(u[0]=s=>l(a).account=s)},null,8,["value"])]),_:1}),_.isAdmin?(i(),c(y,{key:0,label:"\u5BC6\u7801",name:"passwd"},{default:e(()=>[t(w,{"allow-clear":"",maxlength:20,placeholder:"\u8D26\u53F7",value:l(a).passwd,"onUpdate:value":u[1]||(u[1]=s=>l(a).passwd=s)},null,8,["value"])]),_:1})):D("",!0),t(y,{label:"\u53F7\u7801",name:"num"},{default:e(()=>[t(w,{"allow-clear":"",maxlength:20,placeholder:"\u53F7\u7801",value:l(a).num,"onUpdate:value":u[2]||(u[2]=s=>l(a).num=s)},null,8,["value"])]),_:1}),t(y,{label:"\u8F85\u52A9\u90AE\u7BB1",name:"aux_mail"},{default:e(()=>[t(w,{"allow-clear":"",maxlength:20,placeholder:"\u8F85\u52A9\u90AE\u7BB1",value:l(a).aux_mail,"onUpdate:value":u[3]||(u[3]=s=>l(a).aux_mail=s)},null,8,["value"])]),_:1}),t(y,{label:"\u8D26\u53F7\u72B6\u6001",name:"status"},{default:e(()=>[t(F,{value:l(a).status,"onUpdate:value":u[4]||(u[4]=s=>l(a).status=s)},{default:e(()=>[t(A,{value:1},{default:e(()=>[ke]),_:1}),t(A,{value:3},{default:e(()=>[we]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),t(n,{md:12,sm:24,xs:24},{default:e(()=>[t(y,{label:"\u4EE3\u7406IP",name:"proxy"},{default:e(()=>[t(w,{"allow-clear":"",maxlength:20,placeholder:"\u4EE3\u7406IP",value:l(a).proxy,"onUpdate:value":u[5]||(u[5]=s=>l(a).proxy=s)},null,8,["value"])]),_:1}),t(y,{label:"\u4EE3\u7406\u8D26\u53F7",name:"proxy_account"},{default:e(()=>[t(w,{"allow-clear":"",maxlength:20,placeholder:"\u4EE3\u7406\u8D26\u53F7",value:l(a).proxy_account,"onUpdate:value":u[6]||(u[6]=s=>l(a).proxy_account=s)},null,8,["value"])]),_:1}),t(y,{label:"\u4EE3\u7406\u5BC6\u7801",name:"proxy_password"},{default:e(()=>[t(w,{"allow-clear":"",maxlength:20,placeholder:"\u4EE3\u7406\u5BC6\u7801",value:l(a).proxy_password,"onUpdate:value":u[7]||(u[7]=s=>l(a).proxy_password=s)},null,8,["value"])]),_:1}),_.isAdmin?(i(),c(y,{key:0,label:"\u6240\u5C5E\u5206\u7EC4",name:"group_id"},{default:e(()=>[t(he,{placeholder:"\u6240\u5C5E\u5206\u7EC4",value:l(a).group_id,"onUpdate:value":u[8]||(u[8]=s=>l(a).group_id=s)},null,8,["value"])]),_:1})):D("",!0)]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["visible","confirm-loading","title"])}}}),$e={class:"ant-upload-drag-icon"},Re=B("p",{class:"ant-upload-hint"},"\u5C06\u6587\u4EF6\u62D6\u5230\u6B64\u5904\uFF0C\u6216\u70B9\u51FB\u4E0A\u4F20",-1),Ce={name:"gv-import"},Be=Object.assign(Ce,{props:{visible:Boolean,groupId:0},emits:["done","update:visible"],setup($,{emit:f}){const{currentRoute:_}=E(),{query:x}=l(_),d=g(!1),p=a=>{f("update:visible",a)},m=({file:a})=>["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(a.type)?a.size/1024/1024>10?(v.error("\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 10MB"),!1):(d.value=!0,de(a,x).then(R=>{d.value=!1,v.success(R),p(!1),f("done")}).catch(R=>{d.value=!1,v.error(R.message)}),!1):(v.error("\u53EA\u80FD\u9009\u62E9 excel \u6587\u4EF6"),!1);return(a,R)=>{const q=ve,O=be,C=N;return i(),c(C,{width:520,footer:null,title:"\u5BFC\u5165\u7528\u6237",visible:$.visible,"onUpdate:visible":p},{default:e(()=>[t(O,{spinning:d.value},{default:e(()=>[t(q,{accept:".xlsx","show-upload-list":!1,customRequest:m,style:{padding:"24px 0","margin-bottom":"16px"}},{default:e(()=>[B("p",$e,[t(l(fe))]),Re]),_:1})]),_:1},8,["spinning"])]),_:1},8,["visible"])}}}),qe={class:"ele-body"},Oe=B("span",null,"\u5206\u914DIp",-1),Ae=B("span",null,"\u767B\u5F55\u91CD\u7F6E",-1),De=B("span",null,"\u5BFC\u5165\u8D26\u53F7",-1),Fe=b("\u672A\u767B\u5F55"),Ve=b("\u5DF2\u767B\u5F55"),je=b("\u7528\u6237\u540D\u9519\u8BEF"),Ge=b("\u5BC6\u7801\u9519\u8BEF"),Pe=b("IP\u5F02\u5E38"),Ne=b("\u8D26\u53F7\u88AB\u5C01"),Ee=b("\u63A5\u7801"),Se=b("\u672A\u77E5\u9519\u8BEF"),Te=b("\u8D26\u53F7\u5931\u6548"),Le=b("\u672A\u5206\u914DIp"),Me=["onClick"],ze=B("a",{class:"ele-text-danger"},"\u5220\u9664",-1),He={name:"index"},wt=Object.assign(He,{setup($){const f=g(0),_=g(!1),x=g(null),d=g([]),p=g(!1),m=g(null),a=g(!1),R="/gv/accout",{currentRoute:q}=E(),O=()=>{p.value=!0},C=n=>{var o;d.value=[],(o=m==null?void 0:m.value)==null||o.reload({page:1,where:n})},k=n=>{x.value=n!=null?n:null,_.value=!0,a.value=n.isAdmin},u=({page:n,limit:o,where:U,orders:I})=>pe({...U,...I,page:n,limit:o,id:f.value});G({id:1,username:"",sex:void 0});const w=g([{title:"\u8D26\u53F7",dataIndex:"account"},{title:"\u53F7\u7801",dataIndex:"num"},{title:"\u4EE3\u7406Ip",dataIndex:"proxy"},{title:"\u5BFC\u5165\u65F6\u95F4",dataIndex:"add_time",customRender:({text:n})=>W(n)},{title:"\u72B6\u6001",key:"status",dataIndex:"status"},{title:"\u64CD\u4F5C",key:"action",width:200,align:"center"}]),y=()=>{const n=d.value.map(o=>o.id);n.length===0&&v.error("\u8BF7\u9009\u62E9\u8981\u5206\u914Dip\u7684\u8D26\u53F7"),n.length>0&&ce({ids:n}).then(o=>{v.success(o),C()}).catch(o=>{v.error(o.message)})},A=()=>{const n=d.value.map(o=>o.id);n.length===0&&v.error("\u8BF7\u9009\u62E9\u8981\u91CD\u7F6E\u767B\u5F55\u7684\u8D26\u53F7"),n.length>0&&_e({ids:n}).then(o=>{v.success(o),C()}).catch(o=>{v.error(o.message)})};return P(q,n=>{const{path:o}=l(n);if(o!==R)return;const{query:U}=l(q),I=U.id;!I||(f.value=I)},{immediate:!0}),(n,o)=>{const U=Y,I=ee,s=ue,S=te,T=ne,L=le,M=se;return i(),V("div",qe,[t(M,{bordered:!1},{default:e(()=>[t(L,{ref_key:"tableRef",ref:m,columns:w.value,selection:d.value,"onUpdate:selection":o[2]||(o[2]=h=>d.value=h),datasource:u,scroll:{x:1e3},"row-key":"id"},{toolbar:e(()=>[t(I,null,{default:e(()=>[t(U,{type:"primary",class:"ele-btn-icon",onClick:o[0]||(o[0]=h=>y())},{icon:e(()=>[t(l(j))]),default:e(()=>[Oe]),_:1}),t(U,{type:"primary",class:"ele-btn-icon",onClick:o[1]||(o[1]=h=>A())},{icon:e(()=>[t(l(j))]),default:e(()=>[Ae]),_:1}),t(U,{type:"primary",class:"ele-btn-icon",onClick:O},{icon:e(()=>[t(l(xe))]),default:e(()=>[De]),_:1})]),_:1})]),bodyCell:e(({column:h,record:r})=>[h.key==="status"?(i(),V(X,{key:0},[r.status===1?(i(),c(s,{key:0,color:"red"},{default:e(()=>[Fe]),_:1})):r.status===2?(i(),c(s,{key:1,color:"green"},{default:e(()=>[Ve]),_:1})):r.status===3&&r.login_message==="1"?(i(),c(s,{key:2,color:"red"},{default:e(()=>[je]),_:1})):r.status===3&&r.login_message==="2"?(i(),c(s,{key:3,color:"red"},{default:e(()=>[Ge]),_:1})):r.status===3&&r.login_message==="3"?(i(),c(s,{key:4,color:"red"},{default:e(()=>[Pe]),_:1})):r.status===3&&r.login_message==="4"?(i(),c(s,{key:5,color:"red"},{default:e(()=>[Ne]),_:1})):r.status===3&&r.login_message==="5"?(i(),c(s,{key:6,color:"red"},{default:e(()=>[Ee]),_:1})):r.status===3&&r.login_message==="7"?(i(),c(s,{key:7,color:"red"},{default:e(()=>[Se]),_:1})):r.status===3?(i(),c(s,{key:8,color:"red"},{default:e(()=>[Te]),_:1})):r.status===4?(i(),c(s,{key:9,color:"red"},{default:e(()=>[Le]),_:1})):D("",!0)],64)):h.key==="action"?(i(),c(I,{key:1},{default:e(()=>[B("a",{onClick:z=>k(r)},"\u7F16\u8F91",8,Me),t(S,{type:"vertical"}),t(T,{placement:"topRight",title:"\u786E\u5B9A\u8981\u5220\u9664\u6B64\u83DC\u5355\u5417\uFF1F",onConfirm:z=>n.remove(r)},{default:e(()=>[ze]),_:2},1032,["onConfirm"])]),_:2},1024)):D("",!0)]),_:1},8,["columns","selection"])]),_:1}),t(Be,{visible:p.value,"onUpdate:visible":o[3]||(o[3]=h=>p.value=h),groupId:f.value,onDone:C},null,8,["visible","groupId"]),t(Ie,{visible:_.value,"onUpdate:visible":o[4]||(o[4]=h=>_.value=h),data:x.value,isAdmin:a.value,onDone:C},null,8,["visible","data","isAdmin"])])}}});export{wt as default};
