import{q as X,V as we,I as V,a3 as z,o as g,j as A,d as h,B as J,e as C,t as L,c as T,cz as se,aT as N,bW as pe,br as ie,U as Ce,aO as ke,a2 as Se,a9 as Q,w as s,b as f,a4 as ne,F as P,k as R,cA as Te,cB as $e,r as w,aa as Ie,ac as oe,a as U,aF as W,u as Ve,bs as Ae}from"./index.b0e1550a.js";import{C as E}from"./index.9a44580e.js";/* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css               */import"./index.13ccca11.js";import{i as Ke}from"./index.a402f9d8.js";import{_ as F}from"./index.764bd5c9.js";import{l as re,p as ue}from"./index.e6a5db54.js";import{R as ce,_ as de}from"./Group.ef3b103e.js";import"./vuedraggable.umd.15cba163.js";import"./index.50a7696f.js";import"./css.1dd79e5e.js";import"./index.d4371571.js";import"./Spin.83ba1358.js";import"./index.79d1eddb.js";import"./useMaxLevel.2bdcb2e5.js";import"./index.92aa3868.js";import"./RadioButton.4b1c6045.js";import"./CaretUpOutlined.0f21e912.js";import"./iconUtil.035bdc1b.js";const Ne=X({name:"SelectTag",components:{CloseOutlined:we},props:{label:[String,Number],maxTagTextLength:Number,closable:Boolean},emits:["close"],setup(e,{emit:a}){return{text:V(()=>{if(e.label==null)return"";const n=String(e.label);return typeof e.maxTagTextLength=="number"&&n.length>e.maxTagTextLength?`${n.slice(0,e.maxTagTextLength)}...`:n}),close:()=>{a("close")}}}}),Be=(e,a)=>{const o=e.__vccOpts||e;for(const[i,n]of a)o[i]=n;return o},Oe=["title"],ze={class:"ele-select-tag-text"};function Le(e,a,o,i,n,v){const _=z("CloseOutlined");return g(),A("span",{class:"ele-select-tag",title:e.label==null?e.label:String(e.label)},[h("span",ze,[J(e.$slots,"default",{},()=>[C(L(e.text),1)])]),e.closable?(g(),T(_,{key:0,class:"ele-select-tag-close",onClick:se(e.close,["stop"])},null,8,["onClick"])):N("",!0)],8,Oe)}const Pe=Be(Ne,[["render",Le]]),Re={value:[String,Number,Array],multiple:Boolean,disabled:Boolean,size:String,allowClear:Boolean,placeholder:String,id:String,selectedLabel:[String,Number],selected:Array,visible:{type:Boolean,required:!0},bordered:{type:Boolean,default:!0},maxTagCount:Number,maxTagTextLength:Number,arrowPointAtCenter:Boolean,autoAdjustOverflow:{type:Boolean,default:!0},overlayStyle:Object,overlayClassName:String,placement:{type:String,default:"top"}},Ue=X({name:"EleBasicSelect",components:{APopover:pe,AInput:ie,CloseCircleFilled:Ce,DownOutlined:ke,SelectTag:Pe},props:Re,emits:["update:visible","clear","remove-tag"],setup(e,{emit:a}){const{authenticated:o}=Se(),i=V(()=>!o.value||e.disabled),n=V(()=>e.multiple?Array.isArray(e.value)&&e.value.length>0:e.value!=null&&e.value!==""),v=V(()=>e.allowClear&&!i.value&&n.value),_=V(()=>n.value?"":e.placeholder),m=V(()=>typeof e.maxTagCount=="number"&&e.selected!=null&&e.selected.length>e.maxTagCount),u=V(()=>!m.value||e.selected==null?e.selected:e.selected.slice(0,e.maxTagCount)),r=V(()=>!m.value||e.selected==null?[]:e.selected.slice(e.maxTagCount)),c=y=>{i.value||a("update:visible",y)},x=()=>{a("clear")},k=y=>{i.value||a("remove-tag",y)};return Q(()=>e.disabled,y=>{y&&e.visible&&a("update:visible",!1)},{immediate:!0}),{selectDisabled:i,hasValue:n,showClose:v,currentPlaceholder:_,collapse:m,currentSelected:u,collapsSelected:r,updateVisible:c,onClear:x,deleteTag:k}}}),je=(e,a)=>{const o=e.__vccOpts||e;for(const[i,n]of a)o[i]=n;return o},De={class:"ele-select-suffix"},We={key:0,class:"ele-select-tags"};function Ee(e,a,o,i,n,v){const _=z("CloseCircleFilled"),m=z("DownOutlined"),u=z("AInput"),r=z("SelectTag"),c=z("APopover");return g(),T(c,{trigger:"click",visible:e.visible,placement:e.placement,"overlay-style":e.overlayStyle,"overlay-class-name":e.overlayClassName,"arrow-point-at-center":e.arrowPointAtCenter,"auto-adjust-overflow":e.autoAdjustOverflow,"onUpdate:visible":e.updateVisible},{content:s(()=>[J(e.$slots,"default")]),default:s(()=>[h("div",{class:ne(["ele-basic-select",{"ele-select-multiple":e.multiple}])},[f(u,{id:e.id,size:e.size,readonly:!0,bordered:e.bordered,value:e.selectedLabel,disabled:e.selectDisabled,placeholder:e.currentPlaceholder,class:ne({"ant-input-affix-wrapper-focused":e.visible})},{suffix:s(()=>[h("div",De,[e.showClose?(g(),T(_,{key:0,class:"ele-select-clear",onClick:se(e.onClear,["stop"])},null,8,["onClick"])):N("",!0),f(m,{class:"ele-select-arrow"})])]),_:1},8,["id","size","bordered","value","disabled","placeholder","class"]),e.multiple?(g(),A("div",We,[(g(!0),A(P,null,R(e.currentSelected,x=>(g(),T(r,{key:x.value,label:x.label,closable:!e.selectDisabled,"max-tag-text-length":e.maxTagTextLength,onClose:k=>e.deleteTag(x)},null,8,["label","closable","max-tag-text-length","onClose"]))),128)),e.collapse?(g(),T(r,{key:0},{default:s(()=>[J(e.$slots,"maxTagPlaceholder",Te($e(e.collapsSelected)),()=>[C(" + "+L(e.collapsSelected.length)+" ... ",1)])]),_:3})):N("",!0)])):N("",!0)],2)]),_:3},8,["visible","placement","overlay-style","overlay-class-name","arrow-point-at-center","auto-adjust-overflow","onUpdate:visible"])}const Fe=je(Ue,[["render",Ee]]),qe={value:[String,Number,Array],multiple:Boolean,disabled:Boolean,size:String,allowClear:Boolean,placeholder:String,id:String,valueKey:{type:String,default:"value"},labelKey:{type:String,default:"label"},initValue:[Object,Array],tableConfig:{type:Object,required:!0},bordered:{type:Boolean,default:!0},maxTagCount:Number,maxTagTextLength:Number,arrowPointAtCenter:Boolean,autoAdjustOverflow:{type:Boolean,default:!0},overlayStyle:Object,overlayClassName:String,placement:{type:String,default:"bottomLeft"}},q=X({name:"EleTableSelect",props:qe,emits:["update:value","change","focus","blur","clear","remove-tag","visible-change","select"],setup(e,{emit:a,slots:o,expose:i}){const n=w(null),v=w(""),_=w([]),m=w(!1),u=w(null),r=w([]),c=w(!1),x=V(()=>e.multiple?"checkbox":"radio"),k=V(()=>{const t=["ele-table-select-dropdown"];return e.overlayClassName&&t.push(e.overlayClassName),t.join(" ")}),y=t=>{m.value=t,t&&ye(),a("visible-change",t)},S=(t,l)=>{((()=>{const b=I(e.value);if(!e.multiple)return I(t)&&b?!1:t!==e.value;if(b||!e.value.length)return!!t.length;if(t.length!==e.value.length)return!0;for(let K=0;K<t.length;K++)if(!e.value.includes(t[K]))return!0;return!1})()||l)&&(a("update:value",t),a("change",t))},p=t=>{u.value=t,!e.multiple&&t&&!c.value&&(a("select",t),S(t[e.valueKey]))},B=t=>{r.value=t,e.multiple&&t&&!c.value&&(t.length&&a("select",t),S(t.filter(l=>l!=null).map(l=>l[e.valueKey])))},j=()=>{S(e.multiple?[]:null),y(!1),a("clear")},me=t=>{var l;const d=t.value;S((l=e.value)==null?void 0:l.filter(b=>b!==d)),a("remove-tag",d)},M=t=>{const l=I(e.initValue);if(!e.multiple){if(I(t)){v.value="",D(null);return}const d=O(t);if(d){v.value=d[e.labelKey],u.value!==d&&D(d);return}v.value=l?t:e.initValue[e.labelKey],D(null);return}if(t!=null&&t.length){const{checked:d,selectedList:b}=fe(t);_.value=d,Y(b)}else _.value=[],ve()},D=t=>{c.value=!0,p(t),c.value=!1},Y=t=>{c.value=!0,B(t),c.value=!1},ve=()=>{c.value=!0,B([]),c.value=!1},fe=t=>{const l=[],d=[],b=!I(e.initValue);t.forEach($=>{const te=O($,r.value);if(te){l.push({label:te[e.labelKey],value:$});return}const H=O($);if(H){d.push(H),l.push({label:H[e.labelKey],value:$});return}const le=(()=>{if(!b)return $;const ae=O($,e.initValue);return ae?ae[e.labelKey]:$})();l.push({label:le,value:$}),d.push({[e.valueKey]:$,[e.labelKey]:le})});const K=r.value.filter($=>t.includes($[e.valueKey])).concat(d);return{checked:l,selectedList:K}},I=t=>t==null||t==="",Z=()=>e.tableConfig!=null&&Array.isArray(e.tableConfig.datasource),ee=()=>{var t,l;return(l=(t=n.value)==null?void 0:t.getData())!=null?l:[]},_e=()=>Z()?e.tableConfig.datasource:ee(),ge=()=>{var t,l;const d=(l=(t=n.value)==null?void 0:t.getData())!=null?l:[];return e.multiple?!Array.isArray(e.value)||!e.value.length?!1:d.some(b=>e.value.includes(b[e.valueKey])):d.some(b=>b[e.valueKey]===e.value)},ye=()=>{n.value&&!ge()&&(e.multiple?Array.isArray(e.value)&&e.value.length&&n.value.pageToByValue(e.value[e.value.length-1],e.valueKey):I(e.value)||n.value.pageToByValue(e.value,e.valueKey))},O=(t,l)=>l?l.find(d=>d[e.valueKey]===t):O(t,_e()),be=()=>{var t;if(!e.multiple){if(!I(e.value)){const l=O(e.value);l&&(v.value=l[e.labelKey],D(l))}return}if(!Z()&&((t=e.value)==null?void 0:t.length)){const l=[],d=[];r.value.forEach(b=>{const K=O(b[e.valueKey],ee());K&&(d.push(b),l.push(K))}),Y(r.value.filter(b=>!d.includes(b)).concat(l))}},he=t=>({onClick:()=>{e.multiple?(S(t[e.valueKey]),r.value.some(l=>l[e.valueKey]===t[e.valueKey])?B(r.value.filter(l=>l[e.valueKey]!==t[e.valueKey])):B(r.value.concat([t]))):(p(t),y(!1))}}),G=()=>{!I(e.initValue)&&(e.multiple?S(e.initValue.map(l=>l[e.valueKey]),!0):S(e.initValue[e.valueKey],!0))},xe=(t,l)=>{var d;(d=n.value)==null||d.reload(t,l)};return Ie(()=>{var t;const l=!I(e.initValue);e.multiple?l?G():(t=e.value)!=null&&t.length&&M(e.value):l?G():I(e.value)||M(e.value)}),Q(()=>e.value,t=>{M(t)}),Q(()=>e.initValue,()=>{G()}),i({tableRef:n,reload:xe}),()=>oe(Fe,{value:e.value,multiple:e.multiple,disabled:e.disabled,size:e.size,allowClear:e.allowClear,placeholder:e.placeholder,id:e.id,bordered:e.bordered,maxTagCount:e.maxTagCount,maxTagTextLength:e.maxTagTextLength,arrowPointAtCenter:e.arrowPointAtCenter,autoAdjustOverflow:e.autoAdjustOverflow,overlayStyle:e.overlayStyle,placement:e.placement,selectedLabel:v.value,selected:_.value,visible:m.value,overlayClassName:k.value,onClear:j,"onRemove-tag":me,"onUpdate:visible":y},{default:()=>oe(Ke,{...e.tableConfig,ref:n,rowKey:e.valueKey,current:u.value,selection:r.value,selectionType:x.value,customRow:he,onDone:be,"onUpdate:current":p,"onUpdate:selection":B},{...o,maxTagPlaceholder:void 0}),maxTagPlaceholder:o.maxTagPlaceholder})}});const Me={style:{"max-width":"260px"}},Ge={style:{"margin-top":"12px"}},He=C("\u56DE\u663E\u6570\u636E"),Je={__name:"demo-basic",setup(e){const a=w(),o=U({datasource:[],columns:[{title:"\u7528\u6237\u8D26\u53F7",dataIndex:"username",sorter:!0,showSorterTooltip:!1},{title:"\u7528\u6237\u540D",key:"nickname",dataIndex:"nickname",sorter:!0,showSorterTooltip:!1},{title:"\u6027\u522B",dataIndex:"sexName",width:80,sorter:!0,showSorterTooltip:!1},{title:"\u89D2\u8272",key:"roles"}],toolbar:!1,pageSize:5,pageSizeOptions:["5","10","15","20"],size:"small",rowSelection:{columnWidth:38,fixed:"left"},scroll:{x:480}});re().then(n=>{o.datasource=n});const i=()=>{a.value=14};return(n,v)=>{const _=F,m=q,u=W,r=E;return g(),T(r,{title:"\u57FA\u7840\u7528\u6CD5",bordered:!1},{default:s(()=>[h("div",Me,[f(m,{"allow-clear":!0,placeholder:"\u8BF7\u9009\u62E9","value-key":"userId","label-key":"nickname",value:a.value,"onUpdate:value":v[0]||(v[0]=c=>a.value=c),"table-config":o,"overlay-style":{width:"520px",maxWidth:"80%"}},{bodyCell:s(({column:c,record:x})=>[c.key==="roles"?(g(!0),A(P,{key:0},R(x.roles,k=>(g(),T(_,{key:k.roleId,color:"blue"},{default:s(()=>[C(L(k.roleName),1)]),_:2},1024))),128)):N("",!0)]),_:1},8,["value","table-config"])]),h("div",Ge,[f(u,{type:"primary",onClick:i},{default:s(()=>[He]),_:1})])]),_:1})}}},Qe={style:{"max-width":"260px"}},Xe={class:"ele-cell",style:{"margin-top":"15px"}},Ye=h("div",{style:{"line-height":"22px"}},"\xA0\u7981\u7528\uFF1A",-1),Ze={class:"ele-cell-content"},et=C("\u5426"),tt=C("\u662F"),lt={style:{"margin-top":"12px"}},at=C("\u56DE\u663E\u6570\u636E"),nt={__name:"demo-basic-page",setup(e){const a=w(),o=U({datasource:({page:m,limit:u,where:r,orders:c})=>ue({...r,...c,page:m,limit:u}),columns:[{title:"\u7528\u6237\u8D26\u53F7",dataIndex:"username",sorter:!0,showSorterTooltip:!1},{title:"\u7528\u6237\u540D",key:"nickname",dataIndex:"nickname",sorter:!0,showSorterTooltip:!1},{title:"\u6027\u522B",dataIndex:"sexName",width:80,sorter:!0,showSorterTooltip:!1},{title:"\u89D2\u8272",key:"roles"}],toolbar:!1,pageSize:5,pageSizeOptions:["5","10","15","20"],size:"small",rowSelection:{columnWidth:38,fixed:"left"},scroll:{x:480}}),i=w(!1),n=w(),v=()=>{n.value={userId:14,nickname:"\u7BA1\u7406\u5458"}},_=m=>{console.log("item:",m)};return(m,u)=>{const r=F,c=q,x=ce,k=de,y=W,S=E;return g(),T(S,{title:"\u57FA\u7840\u7528\u6CD5",bordered:!1},{default:s(()=>[h("div",Qe,[f(c,{"allow-clear":!0,placeholder:"\u8BF7\u9009\u62E9","value-key":"userId","label-key":"nickname",value:a.value,"onUpdate:value":u[0]||(u[0]=p=>a.value=p),"table-config":o,"overlay-style":{width:"520px",maxWidth:"80%"},disabled:i.value,"init-value":n.value,onSelect:_},{bodyCell:s(({column:p,record:B})=>[p.key==="roles"?(g(!0),A(P,{key:0},R(B.roles,j=>(g(),T(r,{key:j.roleId,color:"blue"},{default:s(()=>[C(L(j.roleName),1)]),_:2},1024))),128)):N("",!0)]),_:1},8,["value","table-config","disabled","init-value"])]),h("div",Xe,[Ye,h("div",Ze,[f(k,{value:i.value,"onUpdate:value":u[1]||(u[1]=p=>i.value=p),name:"disabled"},{default:s(()=>[f(x,{value:!1},{default:s(()=>[et]),_:1}),f(x,{value:!0},{default:s(()=>[tt]),_:1})]),_:1},8,["value"])])]),h("div",lt,[f(y,{type:"primary",onClick:v},{default:s(()=>[at]),_:1})])]),_:1})}}},ot={style:{"max-width":"260px"}},st={class:"ele-cell",style:{"margin-top":"15px"}},it=h("div",{style:{"line-height":"22px"}},"\xA0\u7981\u7528\uFF1A",-1),rt={class:"ele-cell-content"},ut=C("\u5426"),ct=C("\u662F"),dt={style:{"margin-top":"12px"}},mt=C("\u56DE\u663E\u6570\u636E"),vt={__name:"demo-multiple",setup(e){const a=w([]),o=U({datasource:[],columns:[{title:"\u7528\u6237\u8D26\u53F7",dataIndex:"username",sorter:!0,showSorterTooltip:!1},{title:"\u7528\u6237\u540D",key:"nickname",dataIndex:"nickname",sorter:!0,showSorterTooltip:!1},{title:"\u6027\u522B",dataIndex:"sexName",width:80,align:"center",sorter:!0,showSorterTooltip:!1},{title:"\u89D2\u8272",key:"roles"}],toolbar:!1,pageSize:5,pageSizeOptions:["5","10","15","20"],size:"small",rowSelection:{columnWidth:38,preserveSelectedRowKeys:!0,fixed:"left"},scroll:{x:480}}),i=w(!1);re().then(v=>{o.datasource=v});const n=()=>{a.value=[14,18,19]};return(v,_)=>{const m=F,u=q,r=ce,c=de,x=W,k=E;return g(),T(k,{title:"\u591A\u9009",bordered:!1},{default:s(()=>[h("div",ot,[f(u,{multiple:!0,"allow-clear":!0,placeholder:"\u8BF7\u9009\u62E9","value-key":"userId","label-key":"nickname",value:a.value,"onUpdate:value":_[0]||(_[0]=y=>a.value=y),"table-config":o,"overlay-style":{width:"520px",maxWidth:"80%"},disabled:i.value,"init-value":v.initValue,"max-tag-text-length":3,"max-tag-count":5},{bodyCell:s(({column:y,record:S})=>[y.key==="roles"?(g(!0),A(P,{key:0},R(S.roles,p=>(g(),T(m,{key:p.roleId,color:"blue"},{default:s(()=>[C(L(p.roleName),1)]),_:2},1024))),128)):N("",!0)]),_:1},8,["value","table-config","disabled","init-value"])]),h("div",st,[it,h("div",rt,[f(c,{value:i.value,"onUpdate:value":_[1]||(_[1]=y=>i.value=y),name:"disabled"},{default:s(()=>[f(r,{value:!1},{default:s(()=>[ut]),_:1}),f(r,{value:!0},{default:s(()=>[ct]),_:1})]),_:1},8,["value"])])]),h("div",dt,[f(x,{type:"primary",onClick:n},{default:s(()=>[mt]),_:1})])]),_:1})}}},ft={style:{"max-width":"160px"}},_t={__name:"demo-advanced-search",emits:["search"],setup(e,{emit:a}){const o=U({keywords:""}),i=()=>{a("search",o)};return(n,v)=>{const _=ie;return g(),A("div",ft,[f(_,{"allow-clear":"",size:"small",value:o.keywords,"onUpdate:value":v[0]||(v[0]=m=>o.keywords=m),placeholder:"\u8F93\u5165\u5173\u952E\u5B57\u641C\u7D22","prefix-icon":"el-icon-search",onChange:i},{prefix:s(()=>[f(Ve(Ae),{class:"ele-text-placeholder"})]),_:1},8,["value"])])}}},gt={style:{"max-width":"260px"}},yt={style:{"margin-top":"12px"}},bt=C("\u56DE\u663E\u6570\u636E"),ht={__name:"demo-advanced",setup(e){const a=w([]),o=w(null),i=U({datasource:({page:m,limit:u,where:r,orders:c})=>ue({...r,...c,page:m,limit:u}),columns:[{title:"\u7528\u6237\u8D26\u53F7",dataIndex:"username",sorter:!0,showSorterTooltip:!1},{title:"\u7528\u6237\u540D",key:"nickname",dataIndex:"nickname",sorter:!0,showSorterTooltip:!1},{title:"\u6027\u522B",dataIndex:"sexName",width:80,align:"center",sorter:!0,showSorterTooltip:!1},{title:"\u89D2\u8272",key:"roles"}],toolkit:["reload","columns"],pageSize:5,pageSizeOptions:["5","10","15","20"],size:"small",rowSelection:{columnWidth:38,preserveSelectedRowKeys:!0,fixed:"left"},toolsTheme:"default",bordered:!0,toolStyle:{padding:"0 8px"},scroll:{x:480}}),n=w(),v=()=>{n.value=[{userId:14,nickname:"\u7BA1\u7406\u5458"},{userId:18,nickname:"\u7528\u6237\u56DB"},{userId:19,nickname:"\u7528\u6237\u4E94"}]},_=m=>{var u;(u=o.value)==null||u.reload({where:m,page:1})};return(m,u)=>{const r=F,c=q,x=W,k=E;return g(),T(k,{title:"\u53EF\u641C\u7D22",bordered:!1},{default:s(()=>[h("div",gt,[f(c,{ref_key:"selectRef",ref:o,multiple:!0,"allow-clear":!0,placeholder:"\u8BF7\u9009\u62E9","value-key":"userId","label-key":"nickname",value:a.value,"onUpdate:value":u[0]||(u[0]=y=>a.value=y),"table-config":i,"overlay-style":{width:"520px",maxWidth:"80%"},"init-value":n.value},{bodyCell:s(({column:y,record:S})=>[y.key==="roles"?(g(!0),A(P,{key:0},R(S.roles,p=>(g(),T(r,{key:p.roleId,color:"blue"},{default:s(()=>[C(L(p.roleName),1)]),_:2},1024))),128)):N("",!0)]),toolbar:s(()=>[f(_t,{onSearch:_})]),_:1},8,["value","table-config","init-value"])]),h("div",yt,[f(x,{type:"primary",onClick:v},{default:s(()=>[bt]),_:1})])]),_:1})}}},xt={class:"ele-body ele-body-card"},wt={name:"ExtensionTableSelect"},Mt=Object.assign(wt,{setup(e){return(a,o)=>(g(),A("div",xt,[f(Je),f(nt),f(vt),f(ht)]))}});export{Mt as default};
