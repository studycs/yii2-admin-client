import{m as h,r as c,o as _,c as g,bB as z,cj as V,a as H,a9 as j,w as t,b as e,u as o,aT as T,e as C,br as L,c5 as M,c6 as Z,b5 as P,cZ as N,d as O,aP as J,j as F,F as K,t as Q,aF as W,g as X,h as Y}from"./index.b0e1550a.js";import{_ as ee,a as te,C as ae}from"./index.9a44580e.js";/* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css               */import"./index.13ccca11.js";import{i as oe}from"./index.a402f9d8.js";import{_ as se}from"./index.764bd5c9.js";import{a as ne,b as le,I as ue,c as re,d as ie}from"./textnow.573e152c.js";import{R as de,_ as pe}from"./Group.ef3b103e.js";import{U as ce}from"./index.1b1a7df7.js";import"./index.7dd997be.js";import{C as _e}from"./CloudUploadOutlined.b0abe14b.js";import{S as me}from"./Spin.83ba1358.js";import{U as ve}from"./UploadOutlined.8feb67ab.js";import"./vuedraggable.umd.15cba163.js";import"./index.50a7696f.js";import"./css.1dd79e5e.js";import"./index.d4371571.js";import"./index.79d1eddb.js";import"./useMaxLevel.2bdcb2e5.js";import"./index.92aa3868.js";import"./RadioButton.4b1c6045.js";import"./CaretUpOutlined.0f21e912.js";import"./iconUtil.035bdc1b.js";import"./DeleteOutlined.e5f00379.js";import"./DownloadOutlined.b6ed2567.js";const ge={name:"textnow-group"},fe=Object.assign(ge,{props:{value:Number,placeholder:{type:String,default:"\u8BF7\u9009\u62E9\u5206\u7EC4"}},emits:["update:value","blur"],setup(w,{emit:m}){ne().then(r=>{i.value=r.map(p=>({value:p.group_id,label:p.group_name}))}).catch(r=>h.error(r.message));const i=c([]),v=r=>m("update:value",r),d=()=>m("blur");return(r,p)=>{const a=z;return _(),g(a,{"show-search":"",optionFilterProp:"label",options:i.value,value:w.value,placeholder:w.placeholder,"onUpdate:value":v,onBlur:d},null,8,["options","value","placeholder"])}}}),be=C("\u91CD\u65B0\u767B\u5F55"),xe=C("\u5224\u65AD\u5931\u6548"),ye={name:"textnow-add"},he=Object.assign(ye,{props:{visible:Boolean,isAdmin:Boolean,data:Object},emits:["done","update:visible"],setup(w,{emit:m}){const i=w,v=c(null),d=c(!1),r=c(!1),p=b=>{m("update:visible",b)},{form:a,resetFields:k,assignFields:q}=V({id:"",account:"",passwd:"",num:"",proxy:"",proxy_account:"",proxy_password:"",group_id:"",status:""}),A=H({account:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7",type:"string",trigger:"blur"}],passwd:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",type:"string",trigger:"blur"}],num:[{required:!0,message:"\u8BF7\u8F93\u5165\u53F7\u7801",type:"string",trigger:"blur"}],proxy:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EE3\u7406Ip",type:"string",trigger:"blur"}],proxy_account:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EE3\u7406\u8D26\u53F7",type:"string",trigger:"blur"}],proxy_password:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EE3\u7406\u5BC6\u7801",type:"string",trigger:"blur"}],group_id:[{required:!0,message:"\u8BF7\u9009\u62E9\u6240\u5C5E\u5206\u7EC4",type:"number",trigger:"blur"}]}),$=()=>{!v.value||v.value.validate().then(()=>{d.value=!0,le(a).then(b=>{d.value=!1,h.success(b),p(!1),m("done")}).catch(b=>h.error(b.message))}).catch(()=>null)};return j(()=>i.visible,b=>{var s;i.data?(r.value=!0,q({...i.data})):(k(),(s=v.value)==null||s.clearValidate())}),(b,s)=>{const U=L,f=M,D=de,l=pe,n=ee,B=te,x=Z,R=P;return _(),g(R,{width:800,visible:w.visible,"confirm-loading":d.value,title:r.value?"\u7F16\u8F91\u5206\u7EC4":"\u6DFB\u52A0\u5206\u7EC4","body-style":{paddingBottom:"8px"},"onUpdate:visible":p,onOk:$},{default:t(()=>[e(x,{ref_key:"formRef",ref:v,model:o(a),rules:A,"label-col":{md:6,sm:4,xs:24},"wrapper-col":{md:18,sm:20,xs:24}},{default:t(()=>[e(B,{gutter:16},{default:t(()=>[e(n,{md:12,sm:24,xs:24},{default:t(()=>[e(f,{label:"\u8D26\u53F7",name:"account"},{default:t(()=>[e(U,{"allow-clear":"",maxlength:20,placeholder:"\u8D26\u53F7",value:o(a).account,"onUpdate:value":s[0]||(s[0]=u=>o(a).account=u)},null,8,["value"])]),_:1}),i.isAdmin?(_(),g(f,{key:0,label:"\u5BC6\u7801",name:"passwd"},{default:t(()=>[e(U,{"allow-clear":"",maxlength:20,placeholder:"\u8D26\u53F7",value:o(a).passwd,"onUpdate:value":s[1]||(s[1]=u=>o(a).passwd=u)},null,8,["value"])]),_:1})):T("",!0),e(f,{label:"\u53F7\u7801",name:"num"},{default:t(()=>[e(U,{"allow-clear":"",maxlength:20,placeholder:"\u53F7\u7801",value:o(a).num,"onUpdate:value":s[2]||(s[2]=u=>o(a).num=u)},null,8,["value"])]),_:1}),e(f,{label:"\u8D26\u53F7\u72B6\u6001",name:"status"},{default:t(()=>[e(l,{value:o(a).status,"onUpdate:value":s[3]||(s[3]=u=>o(a).status=u)},{default:t(()=>[e(D,{value:1},{default:t(()=>[be]),_:1}),e(D,{value:3},{default:t(()=>[xe]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(n,{md:12,sm:24,xs:24},{default:t(()=>[e(f,{label:"\u4EE3\u7406IP",name:"proxy"},{default:t(()=>[e(U,{"allow-clear":"",maxlength:20,placeholder:"\u4EE3\u7406IP",value:o(a).proxy,"onUpdate:value":s[4]||(s[4]=u=>o(a).proxy=u)},null,8,["value"])]),_:1}),e(f,{label:"\u4EE3\u7406\u8D26\u53F7",name:"proxy_account"},{default:t(()=>[e(U,{"allow-clear":"",maxlength:20,placeholder:"\u4EE3\u7406\u8D26\u53F7",value:o(a).proxy_account,"onUpdate:value":s[5]||(s[5]=u=>o(a).proxy_account=u)},null,8,["value"])]),_:1}),e(f,{label:"\u4EE3\u7406\u5BC6\u7801",name:"proxy_password"},{default:t(()=>[e(U,{"allow-clear":"",maxlength:20,placeholder:"\u4EE3\u7406\u5BC6\u7801",value:o(a).proxy_password,"onUpdate:value":s[6]||(s[6]=u=>o(a).proxy_password=u)},null,8,["value"])]),_:1}),i.isAdmin?(_(),g(f,{key:0,label:"\u6240\u5C5E\u5206\u7EC4",name:"group_id"},{default:t(()=>[e(fe,{placeholder:"\u6240\u5C5E\u5206\u7EC4",value:o(a).group_id,"onUpdate:value":s[7]||(s[7]=u=>o(a).group_id=u)},null,8,["value"])]),_:1})):T("",!0)]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["visible","confirm-loading","title"])}}}),we={class:"ant-upload-drag-icon"},ke=O("p",{class:"ant-upload-hint"},"\u5C06\u6587\u4EF6\u62D6\u5230\u6B64\u5904\uFF0C\u6216\u70B9\u51FB\u4E0A\u4F20",-1),Ue={name:"textnow-import"},Ie=Object.assign(Ue,{props:{visible:Boolean,groupId:0},emits:["done","update:visible"],setup(w,{emit:m}){const{currentRoute:i}=N(),{query:v}=o(i),d=c(!1),r=a=>{m("update:visible",a)},p=({file:a})=>["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(a.type)?a.size/1024/1024>10?(h.error("\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 10MB"),!1):(d.value=!0,ue(a,v).then(k=>{d.value=!1,h.success(k),r(!1),m("done")}).catch(k=>{d.value=!1,h.error(k.message)}),!1):(h.error("\u53EA\u80FD\u9009\u62E9 excel \u6587\u4EF6"),!1);return(a,k)=>{const q=ce,A=me,$=P;return _(),g($,{width:520,footer:null,title:"\u5BFC\u5165\u7528\u6237",visible:w.visible,"onUpdate:visible":r},{default:t(()=>[e(A,{spinning:d.value},{default:t(()=>[e(q,{accept:".xlsx","show-upload-list":!1,customRequest:p,style:{padding:"24px 0","margin-bottom":"16px"}},{default:t(()=>[O("p",we,[e(o(_e))]),ke]),_:1})]),_:1},8,["spinning"])]),_:1},8,["visible"])}}}),$e={class:"ele-body"},Be=O("span",null,"\u5BFC\u5165\u8D26\u53F7",-1),Re=C("\u672A\u767B\u5F55"),Ce=C("\u5DF2\u767B\u5F55"),qe=C("\u8D26\u53F7\u5931\u6548"),Ae=C("\u672A\u5206\u914DIp"),Oe=["onClick"],Te=["onClick"],De={name:"index"},dt=Object.assign(De,{setup(w){const m=c(0),i=c(!1),v=c(null),d=c([]),r=c(!1),p=c(null),a=c(!1),k="/textnow/list",{currentRoute:q}=N(),A=()=>{r.value=!0},$=l=>{var n;d.value=[],(n=p==null?void 0:p.value)==null||n.reload({page:1,where:l})},b=l=>{v.value=l!=null?l:null,i.value=!0,a.value=l.isAdmin},s=l=>{re({ids:[l.id]}).then(n=>{h.success(n),$()}).catch(n=>h.error(n.message))},U=({page:l,limit:n,where:B,orders:x})=>ie({...B,...x,page:l,limit:n,id:m.value});V({id:1,username:"",sex:void 0});const f=c([{title:"\u8D26\u53F7",dataIndex:"account"},{title:"\u53F7\u7801",dataIndex:"num"},{title:"\u4EE3\u7406IP",dataIndex:"proxy"},{title:"\u5BFC\u5165\u65F6\u95F4",dataIndex:"add_time",customRender:({text:l})=>J(l)},{title:"\u72B6\u6001",key:"status",dataIndex:"status"},{title:"\u64CD\u4F5C",key:"action",width:200,align:"center"}]);return j(q,l=>{const{path:n}=o(l);if(n!==k)return;const{query:B}=o(q),x=B.id;!x||(m.value=x)},{immediate:!0}),(l,n)=>{const B=W,x=X,R=se,u=Y,S=oe,E=ae;return _(),F("div",$e,[e(E,{bordered:!1},{default:t(()=>[e(S,{ref_key:"tableRef",ref:p,columns:f.value,selection:d.value,"onUpdate:selection":n[0]||(n[0]=I=>d.value=I),datasource:U,scroll:{x:1e3},"row-key":"id"},{toolbar:t(()=>[e(x,null,{default:t(()=>[e(B,{type:"primary",class:"ele-btn-icon",onClick:A},{icon:t(()=>[e(o(ve))]),default:t(()=>[Be]),_:1})]),_:1})]),bodyCell:t(({column:I,record:y})=>[I.key==="status"?(_(),F(K,{key:0},[y.status===1?(_(),g(R,{key:0,color:"red"},{default:t(()=>[Re]),_:1})):y.status===2?(_(),g(R,{key:1,color:"green"},{default:t(()=>[Ce]),_:1})):y.status===3&&y.login_message!=="success"?(_(),g(R,{key:2,color:"red"},{default:t(()=>[C(Q(y.login_message),1)]),_:2},1024)):y.status===3?(_(),g(R,{key:3,color:"red"},{default:t(()=>[qe]),_:1})):y.status===4?(_(),g(R,{key:4,color:"red"},{default:t(()=>[Ae]),_:1})):T("",!0)],64)):I.key==="action"?(_(),g(x,{key:1},{default:t(()=>[O("a",{onClick:G=>b(y)},"\u7F16\u8F91",8,Oe),e(u,{type:"vertical"}),O("a",{class:"ele-text-danger",onClick:G=>s(y)},"\u5220\u9664",8,Te)]),_:2},1024)):T("",!0)]),_:1},8,["columns","selection"])]),_:1}),e(Ie,{visible:r.value,"onUpdate:visible":n[1]||(n[1]=I=>r.value=I),groupId:m.value,onDone:$},null,8,["visible","groupId"]),e(he,{visible:i.value,"onUpdate:visible":n[2]||(n[2]=I=>i.value=I),data:v.value,isAdmin:a.value,onDone:$},null,8,["visible","data","isAdmin"])])}}});export{dt as default};
