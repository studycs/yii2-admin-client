import{av as F,ao as A,J as S,aU as R,S as W,bq as z,L as U,aK as X,r as Y,a5 as q,a0 as J}from"./index.b0e1550a.js";function ie(e,r){if(!e)return[];var n=e.slice(),t=n.indexOf(r);return t>=0&&n.splice(t,1),n}function de(e,r){var n=(e||[]).slice();return n.indexOf(r)===-1&&n.push(r),n}function I(e){return e.split("-")}function j(e,r){return"".concat(e,"-").concat(r)}function V(e){return e&&e.type&&e.type.isTreeNode}function oe(e,r){var n=[],t=r[e];function a(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];d.forEach(function(i){var h=i.key,f=i.children;n.push(h),a(f)})}return a(t.children),n}function H(e){if(e.parent){var r=I(e.pos);return Number(r[r.length-1])===e.parent.children.length-1}return!1}function Q(e){var r=I(e.pos);return Number(r[r.length-1])===0}function le(e,r,n,t,a,d,i,h,f,c){var g,l=e.clientX,o=e.clientY,u=e.target.getBoundingClientRect(),s=u.top,p=u.height,v=(c==="rtl"?-1:1)*(((a==null?void 0:a.x)||0)-l),k=(v-12)/t,y=h[n.eventKey];if(o<s+p/2){var K=i.findIndex(function(L){return L.key===y.key}),N=K<=0?0:K-1,m=i[N].key;y=h[m]}var P=y.key,w=y,x=y.key,C=0,T=0;if(!f.has(P))for(var G=0;G<k&&H(y);G+=1)y=y.parent,T+=1;var b=r.eventData,E=y.node,O=!0;return Q(y)&&y.level===0&&o<s+p/2&&d({dragNode:b,dropNode:E,dropPosition:-1})&&y.key===n.eventKey?C=-1:(w.children||[]).length&&f.has(x)?d({dragNode:b,dropNode:E,dropPosition:0})?C=0:O=!1:T===0?k>-1.5?d({dragNode:b,dropNode:E,dropPosition:1})?C=1:O=!1:d({dragNode:b,dropNode:E,dropPosition:0})?C=0:d({dragNode:b,dropNode:E,dropPosition:1})?C=1:O=!1:d({dragNode:b,dropNode:E,dropPosition:1})?C=1:O=!1,{dropPosition:C,dropLevelOffset:T,dropTargetKey:y.key,dropTargetPos:y.pos,dragOverNodeKey:x,dropContainerKey:C===0?null:((g=y.parent)===null||g===void 0?void 0:g.key)||null,dropAllowed:O}}function ce(e,r){if(!!e){var n=r.multiple;return n?e.slice():e.length?[e[0]]:e}}function se(e){if(!e)return null;var r;if(Array.isArray(e))r={checkedKeys:e,halfCheckedKeys:void 0};else if(F(e)==="object")r={checkedKeys:e.checked||void 0,halfCheckedKeys:e.halfChecked||void 0};else return null;return r}function fe(e,r){var n=new Set;function t(a){if(!n.has(a)){var d=r[a];if(!!d){n.add(a);var i=d.parent,h=d.node;h.disabled||i&&t(i.key)}}}return(e||[]).forEach(function(a){t(a)}),A(n)}var Z=["title","icon","switcherIcon"];function _(e,r){return e!=null?e:r}function B(e){var r=e||{},n=r.title,t=r._title,a=r.key,d=r.children,i=n||"title";return{title:i,_title:t||[i],key:a||"key",children:d||"children"}}function ue(e){function r(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=R(n);return t.map(function(a){var d,i,h,f;if(!V(a))return null;for(var c=a.children||{},g=a.key,l={},o=0,u=Object.entries(a.props);o<u.length;o++){var s=W(u[o],2),p=s[0],v=s[1];l[z(p)]=v}var k=l.isLeaf,y=l.checkable,K=l.selectable,N=l.disabled,m=l.disableCheckbox,P={isLeaf:k||k===""||void 0,checkable:y||y===""||void 0,selectable:K||K===""||void 0,disabled:N||N===""||void 0,disableCheckbox:m||m===""||void 0},w=S(S({},l),P),x=l.title,C=x===void 0?(d=c.title)===null||d===void 0?void 0:d.call(c,w):x,T=l.icon,G=T===void 0?(i=c.icon)===null||i===void 0?void 0:i.call(c,w):T,b=l.switcherIcon,E=b===void 0?(h=c.switcherIcon)===null||h===void 0?void 0:h.call(c,w):b,O=U(l,Z),L=(f=c.default)===null||f===void 0?void 0:f.call(c),$=S(S({},O),{},{title:C,icon:G,switcherIcon:E,key:g,isLeaf:k},P),D=r(L);return D.length&&($.children=D),$})}return r(e)}function ve(e,r,n){var t=B(n),a=t._title,d=t.key,i=t.children,h=new Set(r===!0?[]:r),f=[];function c(g){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return g.map(function(o,u){for(var s=j(l?l.pos:"0",u),p=_(o[d],s),v,k=0;k<a.length;k+=1){var y=a[k];if(o[y]!==void 0){v=o[y];break}}var K=S(S({},X(o,[].concat(A(a),[d,i]))),{},{title:v,key:p,parent:l,pos:s,children:null,data:o,isStart:[].concat(A(l?l.isStart:[]),[u===0]),isEnd:[].concat(A(l?l.isEnd:[]),[u===g.length-1])});return f.push(K),r===!0||h.has(p)?K.children=c(o[i]||[],K):K.children=[],K})}return c(e),f}function ee(e,r,n){var t={};F(n)==="object"?t=n:t={externalGetKey:n},t=t||{};var a=t,d=a.childrenPropName,i=a.externalGetKey,h=a.fieldNames,f=B(h),c=f.key,g=f.children,l=d||g,o;i?typeof i=="string"?o=function(p){return p[i]}:typeof i=="function"&&(o=function(p){return i(p)}):o=function(p,v){return _(p[c],v)};function u(s,p,v,k){var y=s?s[l]:e,K=s?j(v.pos,p):"0",N=s?[].concat(A(k),[s]):[];if(s){var m=o(s,K),P={node:s,index:p,pos:K,key:m,parentPos:v.node?v.pos:null,level:v.level+1,nodes:N};r(P)}y&&y.forEach(function(w,x){u(w,x,{node:s,pos:K,level:v?v.level+1:-1},N)})}u(null)}function he(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.initWrapper,t=r.processEntity,a=r.onProcessFinished,d=r.externalGetKey,i=r.childrenPropName,h=r.fieldNames,f=arguments.length>2?arguments[2]:void 0,c=d||f,g={},l={},o={posEntities:g,keyEntities:l};return n&&(o=n(o)||o),ee(e,function(u){var s=u.node,p=u.index,v=u.pos,k=u.key,y=u.parentPos,K=u.level,N=u.nodes,m={node:s,nodes:N,index:p,key:k,pos:v,level:K},P=_(k,v);g[v]=m,l[P]=m,m.parent=g[y],m.parent&&(m.parent.children=m.parent.children||[],m.parent.children.push(m)),t&&t(m,o)},{externalGetKey:c,childrenPropName:i,fieldNames:h}),a&&a(o),o}function pe(e,r){var n=r.expandedKeysSet,t=r.selectedKeysSet,a=r.loadedKeysSet,d=r.loadingKeysSet,i=r.checkedKeysSet,h=r.halfCheckedKeysSet,f=r.dragOverNodeKey,c=r.dropPosition,g=r.keyEntities,l=g[e],o={eventKey:e,expanded:n.has(e),selected:t.has(e),loaded:a.has(e),loading:d.has(e),checked:i.has(e),halfChecked:h.has(e),pos:String(l?l.pos:""),parent:l.parent,dragOver:f===e&&c===0,dragOverGapTop:f===e&&c===-1,dragOverGapBottom:f===e&&c===1};return o}function ye(e){var r=e.data,n=e.expanded,t=e.selected,a=e.checked,d=e.loaded,i=e.loading,h=e.halfChecked,f=e.dragOver,c=e.dragOverGapTop,g=e.dragOverGapBottom,l=e.pos,o=e.active,u=e.eventKey,s=S(S({dataRef:r},r),{},{expanded:n,selected:t,checked:a,loaded:d,loading:i,halfChecked:h,dragOver:f,dragOverGapTop:c,dragOverGapBottom:g,pos:l,active:o,eventKey:u,key:u});return"props"in s||Object.defineProperty(s,"props",{get:function(){return e}}),s}function M(e,r){var n=new Set;return e.forEach(function(t){r.has(t)||n.add(t)}),n}function re(e){var r=e||{},n=r.disabled,t=r.disableCheckbox,a=r.checkable;return!!(n||t)||a===!1}function ae(e,r,n,t){for(var a=new Set(e),d=new Set,i=0;i<=n;i+=1){var h=r.get(i)||new Set;h.forEach(function(l){var o=l.key,u=l.node,s=l.children,p=s===void 0?[]:s;a.has(o)&&!t(u)&&p.filter(function(v){return!t(v.node)}).forEach(function(v){a.add(v.key)})})}for(var f=new Set,c=n;c>=0;c-=1){var g=r.get(c)||new Set;g.forEach(function(l){var o=l.parent,u=l.node;if(!(t(u)||!l.parent||f.has(l.parent.key))){if(t(l.parent.node)){f.add(o.key);return}var s=!0,p=!1;(o.children||[]).filter(function(v){return!t(v.node)}).forEach(function(v){var k=v.key,y=a.has(k);s&&!y&&(s=!1),!p&&(y||d.has(k))&&(p=!0)}),s&&a.add(o.key),p&&d.add(o.key),f.add(o.key)}})}return{checkedKeys:Array.from(a),halfCheckedKeys:Array.from(M(d,a))}}function ne(e,r,n,t,a){for(var d=new Set(e),i=new Set(r),h=0;h<=t;h+=1){var f=n.get(h)||new Set;f.forEach(function(o){var u=o.key,s=o.node,p=o.children,v=p===void 0?[]:p;!d.has(u)&&!i.has(u)&&!a(s)&&v.filter(function(k){return!a(k.node)}).forEach(function(k){d.delete(k.key)})})}i=new Set;for(var c=new Set,g=t;g>=0;g-=1){var l=n.get(g)||new Set;l.forEach(function(o){var u=o.parent,s=o.node;if(!(a(s)||!o.parent||c.has(o.parent.key))){if(a(o.parent.node)){c.add(u.key);return}var p=!0,v=!1;(u.children||[]).filter(function(k){return!a(k.node)}).forEach(function(k){var y=k.key,K=d.has(y);p&&!K&&(p=!1),!v&&(K||i.has(y))&&(v=!0)}),p||d.delete(u.key),v&&i.add(u.key),c.add(u.key)}})}return{checkedKeys:Array.from(d),halfCheckedKeys:Array.from(M(i,d))}}function ge(e,r,n,t,a,d){var i;d?i=d:i=re;var h=new Set(e.filter(function(c){var g=!!n[c];return g})),f;return r===!0?f=ae(h,a,t,i):f=ne(h,r.halfCheckedKeys,a,t,i),f}function ke(e){var r=Y(0),n=q();return J(function(){var t=new Map,a=0,d=e.value||{};for(var i in d)if(Object.prototype.hasOwnProperty.call(d,i)){var h=d[i],f=h.level,c=t.get(f);c||(c=new Set,t.set(f,c)),c.add(h),a=Math.max(a,f)}r.value=a,n.value=t}),{maxLevel:r,levelEntities:n}}export{ge as a,ie as b,he as c,de as d,ue as e,B as f,fe as g,pe as h,ye as i,_ as j,ve as k,ce as l,oe as m,le as n,I as o,se as p,ke as u};
