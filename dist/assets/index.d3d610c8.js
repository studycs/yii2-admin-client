import{s as S,dk as B,_ as C,cZ as L,dd as T,r as i,a as q,I as N,dl as U,o as V,j,b as s,w as n,u as o,d,dm as E,a4 as F,dn as H,c6 as O,t as v,b1 as P,e as $,p as D,i as Z,m as g,dp as A,br as G,c5 as J,c$ as K,aF as M}from"./index.b0e1550a.js";import{L as Q}from"./LockOutlined.dd85d06b.js";async function W(a){var e;a.tenantId=2;const r=await S.post("/site/login",a);return r.data.code===0?(B((e=r.data.data)==null?void 0:e.access_token,a.remember),r.data.message):Promise.reject(new Error(r.data.message))}const h=a=>(D("data-v-e3349942"),a=a(),Z(),a),X=h(()=>d("div",{style:{height:"30px"}},null,-1)),Y=h(()=>d("div",{class:"login-copyright"}," copyright \xA9 2022 eleadmin.com all rights reserved. ",-1)),ee={style:{position:"absolute",right:"30px",top:"20px","z-index":"999"}},se={__name:"index",setup(a){const{currentRoute:r}=L(),{t:e}=T(),w=i(0),p=i(null),c=i(!1),t=q({code:"",username:"admin",password:"admin2016",remember:!0});i("");const x=i(""),y=N(()=>({username:[{required:!0,message:e("login.username"),type:"string",trigger:"blur"}],password:[{required:!0,message:e("login.password"),type:"string",trigger:"blur"}]})),f=()=>{const{query:l}=o(r);H(l.from)},b=()=>{!p.value||p.value.validate().then(()=>{if(t.code.toLowerCase()!==x.value){g.error("\u9A8C\u8BC1\u7801\u9519\u8BEF");return}c.value=!0,W(t).then(l=>{g.success(l),A(),f()}).catch(l=>{g.error(l.message),c.value=!1})})};return U()&&f(),(l,u)=>{const k=G,m=J,I=K,z=M,R=O;return V(),j("div",{class:F(["login-wrapper",["","login-form-right","login-form-left"][w.value]])},[s(R,{ref_key:"formRef",ref:p,model:t,rules:o(y),class:"login-form ele-bg-white"},{default:n(()=>[d("h4",null,v(o(e)("login.title")),1),s(m,{name:"username"},{default:n(()=>[s(k,{"allow-clear":"",size:"large",value:t.username,"onUpdate:value":u[0]||(u[0]=_=>t.username=_),placeholder:o(e)("login.username")},{prefix:n(()=>[s(o(P))]),_:1},8,["value","placeholder"])]),_:1}),s(m,{name:"password"},{default:n(()=>[s(I,{size:"large",value:t.password,"onUpdate:value":u[1]||(u[1]=_=>t.password=_),placeholder:o(e)("login.password")},{prefix:n(()=>[s(o(Q))]),_:1},8,["value","placeholder"])]),_:1}),s(m,null,{default:n(()=>[s(z,{block:"",size:"large",type:"primary",loading:c.value,onClick:b},{default:n(()=>[$(v(c.value?o(e)("login.loading"):o(e)("login.login")),1)]),_:1},8,["loading"]),X]),_:1})]),_:1},8,["model","rules"]),Y,d("div",ee,[s(E,{placement:"bottomLeft",style:{fontSize:"18px",color:"#fff"}})])],2)}}},te=C(se,[["__scopeId","data-v-e3349942"]]);export{te as default};
